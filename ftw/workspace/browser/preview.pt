

<div class="previewContainer">

  <tal:loop repeat="preview view/get_previews">
    <a class="colorboxLink" rel="entry"
       tal:define="width python: preview.get_scale_properties()[0];
                   height python: preview.get_scale_properties()[1]"
       tal:attributes="href string:${preview/full_url};
                       styles string:width:${width};;height:${height};;">
       <tal:img replace="structure preview/preview" />
    </a>
  </tal:loop>

  <script type="text/javascript">
  $('a.colorboxLink').colorbox(
    {
      'photo': true,
      'current': '{current}/{total}',
      'maxWidth': '100%',
      'maxHeight': '100%'
    });
  </script>
</div>